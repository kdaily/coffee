{% extends "base.html" %}

{% block title %}Coffee Roasters{% endblock %}

{% block content %}

{% load thumbnail %}

{% if roaster_list %}

<div class="hero-unit">
<div class="row-fluid">

<div class="span12 spacerTop">  
<h2>Coffee roasters</h2>  
	<form id="custom-search-form" class="form-search form-horizontal form-inline">
		<div class="input-append">
		<input type="text" class="search-query" placeholder="Roaster by location search">
		<button type="submit" class="btn"><i class="icon-search"></i></button>
		</div>
	</form>
	<form id="custom-search-form" class="form-search form-horizontal form-inline">
		<div class="input-append">
		<input type="text" class="search-query" placeholder="Roaster name search">
		<button type="submit" class="btn"><i class="icon-search"></i></button>
		</div>
	</form>
</div> 

  {% for roaster in roaster_list %}
  {% if forloop.counter0|divisibleby:"3" %}
  <div class="row-fluid spacer">
  {% endif %}  
   <div class="span4 span4Mod">  	
		<div style="padding:4px">		
		{% thumbnail roaster.thumb "150x200" as im  %}
			<img src = "{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" alt="{{ roaster.name }}" align="middle"> 
		{% endthumbnail %}
		</div>
		<div class="caption">
			<h3>{{ roaster.name }}</h3>
					<a href="{{ roaster.website }}" >{{ roaster.website }}</a>
					<p><i class="icon icon-map-marker"></i> {{ roaster.city }}, {{ roaster.state }}, {{ roaster.rating.votes}}</p>		
				</div>
								
			<div class="row-fluid">
				<div class="span4"><a class="btn btn-mini" href="/roaster/{{ roaster.id }}/">See more</a></div>
				{% if user.is_authenticated %}
				<div class="span4"><a class="btn btn-mini" href="/adduserroaster/{{ roaster.id }}"><i class="icon-user icon-plus"></i></a></div>
				{% else %}				
					<div class="span4"><a class="btn disabled btn-mini" href="">Add to my roasters</a></div>			
				{% endif %}				
				<div class="span4">
		    		<fieldset class="rating">    			
		    			<input type="radio" id="star5" name="rating" value="5" /><label for="star5" title="5 stars">5 stars</label>
		    			<input type="radio" id="star4" name="rating" value="4" /><label for="star4" title="4 stars">4 stars</label>
		    			<input type="radio" id="star3" name="rating" value="3" /><label for="star3" title="3 stars">3 stars</label>
		    			<input type="radio" id="star2" name="rating" value="2" /><label for="star2" title="2 stars">2 stars</label>
		    			<input type="radio" id="star1" name="rating" value="1" /><label for="star1" title="1 stars">1 star</label>
					</fieldset>
					State: {{ state }}<br />
			</div>
		</div>			
   </div>
   
   
   {% if forloop.counter|divisibleby:"3" %}
  </div>
  {% endif %}
  
  {% endfor %}
  
  </div>    
</div>

{% if is_paginated %}
<div class="pagination">
  <span class="step-links">
    {% if page_obj.has_previous %}
    <a href="?page={{ page_obj.previous_page_number }}">previous</a>
    {% endif %}
    
    <span class="current">
      Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
    </span>
    
    {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}">next</a>
    {% endif %}
  </span>
</div>
</div>
{% endif %}
{% endif %}

{% endblock %}
